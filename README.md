# Исмагилов Тимур Backend

## Вопросы
* Не сказано, какие могут быть id пользователей. Предполагаю, что id — любое целое число.
* Не сказано, какие могут быть названия сегментов. Предполагаю, что любые непустые строки.
* Не сказано, можно ли использовать кодогенерацию на основе Swagger-файла. Решил, что можно, потому что это сокращает time-to-market и количество ошибок.
* Что делать, если создаётся сегмент с названием, как у сегмента, который был когда-то удалён? Я решил, что так нельзя, пускай аналитики из отдела каждый раз уникальное название для экспериментов придумывают. Так и выгрузка отчётов однозначнее.
* Не очень понятно, что значит, что какой-то процент пользователей будет попадать в сегмент автоматически. Должны ли старые известные пользователи попадать в этот процент ретроспективно? Или только новые? Надо ли учитывать явно добавленных в этот процент? Насколько строго должен этот процент держаться?
 
  Я решил так. Когда создаётся сегмент с процентом _n_, _n_ процентам известным ранее пользователям ретроспективно задаётся такой сегмент разово. Далее, при появлении информации о ранее неизвестном пользователе, этот пользователь с вероятностью _n_ будет добавлен в сегмент.

## Запуск
Требуется Docker.

### Как прогнать тесты
```shell
make test
```

### Как запустить сервер
```shell
make run
```

Делайте запросы к [localhost:8080](http://localhost:8080).

### Как сбросить базу данных
```shell
make clear
```

## API
Для полного описания API см. файл `swagger.yaml`. Ниже будет приведено краткое описание для ознакомления.

TODO: написать это краткое описание
